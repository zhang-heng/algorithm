# 01背包问题

## 介绍

给定**N个物品**，每个物品有**重量W**和**价值V**，你有一个能**装重量M的背包**，问怎么装使得**携带价值最大**，并且每个物品只有一个。

**上面这个题干有以下这些故事：**
* 超市大赢家
* 山洞的宝藏
* RPG游戏回城卖垃圾

直观上，我们直观上会以贪心策略来求解这道题，所谓**携带价值最大**，实际上就是找性价比最高的一些东西塞包里面，这里性价比就是**价值/重量**，如果去抢商场，当然是去洗劫珠宝店，不然去抢超市，捎上两斤白菜么？

但是，贪心策略给出的结论不一定是最优解，比如我给出下面这个清单，使用贪心策略来装货试试。

| 编号 | 价值 | 重量 | 性价比 |
| :--: | :--: | :--: | :--: |
|  A   |  9   |  3   |   3    |
|  B   |  7   |  2   |  3.5   |
|  C   |  1   |  1   |   2    |

现在给定一个负重为3的背包，从性价比的倒序排列，先把性价比最高的B先塞包里，然后再拿个C填剩下的空缺。但是这个明显不是最优策略，就拿一个A的价值是最高的。

| 组合 | 重量 | 价值 |
| :--: | :--: | :--: |
| B+C  | 3    | 8    |
| A    | 3    | 9    |

对于最优解，怎么做？

## 最优解

还是前面这个例子，我们先做一个穷举求解，对于很多人而言，没有什么是不能暴力的，如果不能，加机器 =,=

|  idx  | ABC  |   重量    |   价值   |
| :--: | :--: | :-------: | :------: |
| 0 | 000  | 0+0+0 = 0 | 0+0+0 = 0  |
| 1 | 001  |  0+0+1 = 1  | 0+0+1 = 1  |
| 2 | 010  |  0+2+0 = 2  | 0+7+0 = 7  |
| 3 | 011  |  0+2+1 = 3  | 0+7+1 = 8  |
| 4 | 100  |  3+0+0 = 3  | 9+0+0 = 9  |
| 5 | 101  |  3+0+1 = 4  | 9+0+1 = 10 |
| 6 | 110  |  3+2+0 = 5  | 9+7+0 = 16 |
| 7 | 111  |  3+2+1 = 6  | 9+7+1 = 17 |

3个物品跑了8次，40个物品得计算1 0995 1162 7776次。一桌子的东西出个方案给算了一年，废物！

**我们来优化一下。**

大家应该看出来很多计算压根就是多余的，比如第5个100就已经不用计算了，第4个就已经把包装满了。

下面这个张图是对前面表格计算的优化，在是否添加下一个物品的时候添加一条判断策略：**添加的物品是否已经超重**。

![](../../res/Dynamic_Programming/p13.png)

## 动态规划

动态规划有个基本思考方法，是将大问题拆解，对解空间的“所有”方案进行了比对，并分阶段去决策处理，通过对过程进行"剪枝"，实现优化。

01背包问题明显有符合动态规划的基本特征：有分支处理，有重复处理，搜索最优解；

但是，这里需要找到01背包问题的状态和状态转移，这里悬而不论。先抛开题设中给定的包容量，思考一个问题，如果现在在给定负重的背包时已经有了最优解，那再加一个单位包容量，要怎么处理。






















